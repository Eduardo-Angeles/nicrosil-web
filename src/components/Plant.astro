---
/**
 * Planta orgánica decorativa animada por scroll.
 *
 * Props:
 *   flip  — espeja horizontalmente (para la planta derecha)
 *   class — clases de posicionamiento externas (absolute bottom-0 left-0, etc.)
 *
 * Coordenadas del viewBox: 0 0 220 460
 * La planta crece desde la base (y=460) hacia arriba (y=0).
 * El tallo se curva en S suave; las ramas alternan izquierda/derecha
 * para un aspecto orgánico equilibrado.
 *
 * Para añadir una nueva rama: agrega otro <PlantPath> con su path "d",
 * ajusta rangeStart/rangeEnd y el script medirá la longitud automáticamente.
 */
import PlantPath from "@components/PlantPath.astro";

interface Props {
  flip?: boolean;
  class?: string;
}

const { flip = false, class: className = "" } = Astro.props;
---

<svg
  viewBox="0 0 220 460"
  fill="none"
  overflow="visible"
  xmlns="http://www.w3.org/2000/svg"
  aria-hidden="true"
  class={className}
>
  <!--
    Todos los paths dentro de <g> para aplicar el flip en un solo lugar.
    translate(220,0) scale(-1,1) = espejo alrededor del centro del viewBox (x=110).
  -->
  <g transform={flip ? "translate(220,0) scale(-1,1)" : undefined}>

    <!-- 1. Tallo principal — S-curve suave de base a punta -->
    <PlantPath
      d="M 110 460 C 100 400, 82 340, 88 275 C 94 210, 68 148, 68 82 C 68 45, 73 18, 75 0"
      rangeStart={0}
      rangeEnd={55}
      strokeWidth={1.8}
    />

    <!-- 2. Rama baja izquierda — sale del tallo ~y=278 -->
    <PlantPath
      d="M 90 278 C 68 256, 34 248, 12 228"
      rangeStart={12}
      rangeEnd={50}
      strokeWidth={1.4}
    />

    <!-- 3. Sub-rama baja — ramifica desde ~(50, 252) -->
    <PlantPath
      d="M 50 252 C 38 232, 28 212, 30 188"
      rangeStart={22}
      rangeEnd={58}
      strokeWidth={1.1}
    />

    <!-- 4. Rama media derecha — sale del tallo ~y=190 -->
    <PlantPath
      d="M 83 190 C 108 168, 142 160, 158 136"
      rangeStart={32}
      rangeEnd={68}
      strokeWidth={1.4}
    />

    <!-- 5. Sub-rama media derecha — ramifica desde ~(132, 152) -->
    <PlantPath
      d="M 132 152 C 145 130, 152 108, 145 84"
      rangeStart={42}
      rangeEnd={76}
      strokeWidth={1.1}
    />

    <!-- 6. Rama alta izquierda — sale del tallo ~y=118 -->
    <PlantPath
      d="M 68 118 C 46 95, 18 90, 5 70"
      rangeStart={50}
      rangeEnd={84}
      strokeWidth={1.3}
    />

    <!-- 7. Sub-rama alta izquierda — ramifica desde ~(35, 85) -->
    <PlantPath
      d="M 35 85 C 24 66, 18 46, 22 24"
      rangeStart={58}
      rangeEnd={90}
      strokeWidth={1.0}
    />

    <!-- 8. Punta superior — pequeña rama final desde ~(73, 42) -->
    <PlantPath
      d="M 73 42 C 85 26, 95 16, 98 2"
      rangeStart={68}
      rangeEnd={100}
      strokeWidth={1.0}
    />

  </g>
</svg>
